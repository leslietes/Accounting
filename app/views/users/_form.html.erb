<% if @user.errors.any? %>
 <div class="errors">
 	<h2><%= pluralize(@user.errors.count, "error") %> prohibited this entry from being saved:</h2>
  <ul>
  	<% @user.errors.full_messages.each do |msg| %>
	  <li><%= msg %></li>
	<% end %>  
  </ul>
  </div>
<% end %>

<%= form_for @user do |f| -%>

<% if current_user.is_admin? %>
<p><%= label_tag 'login' %>
<%= f.text_field :login %></p>

<p><%= label_tag 'name' %>
<%= f.text_field :name %></p>

<p><%= label_tag 'email' %>
<%= f.text_field :email %></p>

<p><%= label_tag 'role' %>
<%= select('user', 'role', @roles.collect{|role| [role]}, {:include_blank => true}) %>
<% end %>

<p><%= label_tag 'password' %>
<%= f.password_field :password %></p>

<p><%= label_tag 'password_confirmation', 'Confirm Password' %>
<%= f.password_field :password_confirmation %></p>

<p><%= submit_tag %>&nbsp;&nbsp;&nbsp;<%= link_to 'Cancel', users_path %></p>
<% end -%>