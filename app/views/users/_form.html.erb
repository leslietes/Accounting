<% if @user.errors.any? %>
  <ul class="errors">
  	<% @user.errors.full_messages.each do |msg| %>
	  <li><%= msg %></li>
	<% end %>  
  </ul>
<% end %>

<%= form_for @user do |f| -%>

<% if current_user.is_admin? %>
<p><%= label_tag 'login' %>
<%= f.text_field :login %></p>

<p><%= label_tag 'name' %>
<%= f.text_field :name %></p>

<p><%= label_tag 'email' %>
<%= f.text_field :email %></p>

<p><%= label_tag 'role' %>
<%= select('user', 'role', @roles.collect{|role| [role]}, {:include_blank => true}) %>
<% end %>

<p><%= label_tag 'password' %>
<%= f.password_field :password %></p>

<p><%= label_tag 'password_confirmation', 'Confirm Password' %>
<%= f.password_field :password_confirmation %></p>

<p><%= submit_tag %></p>
<% end -%>